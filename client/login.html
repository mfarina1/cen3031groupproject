<html>

<head>
    <meta charset="UTF-8">
    <title>Petree Print Login</title>
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase.js"> </script>
    <script>
        var config = {
            apiKey: "AIzaSyC8iqW-J1UCgSg7GHez4SuO51APq_n6AJI",
            authDomain: "cen3031-photography-group3.firebaseapp.com",
            databaseURL: "https://cen3031-photography-group3.firebaseio.com",
            projectId: "cen3031-photography-group3",
            storageBucket: "cen3031-photography-group3.appspot.com",
            messagingSenderId: "194055935448"
        };
        firebase.initializeApp(config);
    </script>
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

    <body>
        <template is="dom-bind" id="app">
            <material elevation="1" style="padding: 2rem;">
                <h2> Please enter your email and password. </h2>
                <input label="Email" value="{{email::input}}" type="text"></input>
                <input label="Password" value="{{password::input}}" type="password"></input>
                <button on-click="signIn">Sign In</button>
                <button on-click="register">Register</button>
                <button on-click="signOut">Sign Out</button>
            <material>
        </template>

        <script>
            (function() {
                var app = document.querySelector('#app');

                app.signIn = function() {
                    var email = app.email;
                    var password = app.password;

                    if (!email || !password) {
                        return console.log('email and password required');
                    }

                    //  Sign in user
                    firebase.auth().signInWithEmailAndPassword(email, password)
                        
                        //  Handle errors here
                        /*
                        .catch(function(error) {
                            var errorCode = error.code;
                            var errorMessage = error.message;
                            console.log('signIn error', error);
                        //  .....
                        });
                        */
                    };

                app.register = function() {
                    var email = app.email;
                    var password = app.password;

                    if (!email || !password) {
                        return console.log('email and password required');
                    }

                    //  Register user
                    firebase.auth().createUserWithEmailAndPassword(email, password)
                        //  Catching error if problem with registering
                        .catch(function(error) {
                            console.log('register error', error);
                            if (error.code === 'auth/email-already-in-use') {
                                var credential = firebase.auth.EmailAuthProvider.credential(email, password);
                            }
                        });
                };

                app.signOut = function() {
                    //  Sign out
                    firebase.auth().signOut();
                };

                //  Listen to auth state changes
                firebase.auth().onAuthStateChanged(function(user) {
                    app.user = user;
                    console.log('user', user);
                });

            })();
        </script>
        
    </body>
</head>

</html>














